<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<title>Run 4 Fun</title>
</head>
<body>

	<header>
		<nav class=nav-menu>
			<ul>
				<li>
					<a href="index.html">Home</a>
					<a href="extract.html">Extract</a>
					<a href="badges.html">Bages</a>
					<a href="collectibles.html">Shop</a>
					<a href="data.html">Data</a>
				</li>
			</ul>
		</nav>

		<div class="user-pill"></div>
		<a id="logout" href="#">Logout</a>
	</header>

	<main>

		<section id="messaging"></section>

		<section class="dashboard" id="management-dashboard"></section>

		<section id="dialog">dialog</section>

	<div class="section-title">
		<p>Collectibles</p>
		<p class="toogle-content" id="toogle-collectibles" data-toogle="true">[Hide Section]</p>
		<section id="collectibles">
		</section>
	</div>

	<div class="modal" id="parent-purchase-modal">
		<div class="modal-content" id="purchase-modal"></div>
	</div>

	<div class="section-title">
		<p>Badges</p>
		<p class="toogle-content" id="toogle-badges" data-toogle="true">[Hide Section]</p>
		<section id="badges">
		</section>
	</div>

		<section id="activities-data"></section>

		<section id="enter-data">
			<form class="form" action="ActivityController" method="post" id="activity-form">
				<div class="form-block">
					<div class="form-input">
						<label for="date">Date:</label>
						<input type="date" id="date" name="date">
					</div>

					<div class="form-input">
						<label for="date">Physical Activity:</label>
						<select name="activity" id="activity">
							<option value="walking">Walking</option>
							<option value="running">Running</option>
						</select>
					</div>

					<div class="form-input">
						<label for="place">Place:</label>
						<input type="text" placeholder="Gym" id="place" name="place">
					</div>
				</div>

				<div class="form-block">
					<div class="form-input">
						<label for="route_distance">Route Distance:</label>
						<input class="route_dist_metric" type="number" id="route_distance" name="route_distance" placeholder="0.00" step="0.01">
						<p class="route_dist_metric"> Kms </p>
					</div>

					<div class="form-input">
						<label for="no_laps"># Laps:</label>
						<input type="number" id="no_laps" name="no_laps">
					</div>

					<div class="form-input">
						<label for="time">Time:</label>
						<input type="text" placeholder="hh:mm:ss" id="time" name="time">
					</div>
				</div>

				<div class="form-block">
					<div class="form-input inline">
						<button type="submit">Submit</button>
						<input type="button" value="Reset">
					</div>
				</div>
			</form>
		</section>

		<section id="extract">
			<div class="section-title">
				<p>Extract</p>
				<p>Hide Section</p>
			</div>
		</section>
	</main>

	<footer>
		<p> Run4Fun - 2020 </p>
	</footer>

	<!-- <script type="text/javascript" src="script.js"></script> -->

	<script src="node_modules/systemjs/dist/system.js"></script>
	<script>
		System.defaultJSExtensions = true;
		System.import('js/app/boot').catch(function(err){
			console.error(err);
		});
	</script>

	<script>
		function col_click(){
			Array.from(document.querySelectorAll("div.collectible.not-purchased"))
				.forEach(el => {
					el.addEventListener('click', function(event){
						console.log(event, el);
						let icon = el.firstElementChild.src;
						purchase_order({
							'description' : "Winter's comming",
							'icon' : icon,
							'hist' : "",
							'price' : 40
						});
						document.querySelector("#parent-purchase-modal").style.display = "block";
					});
				});

			function purchase_order(collectible){
				let pmodal = document.querySelector("#purchase-modal");
				pmodal.innerHTML = `
				<div class="modal-header">
					<p style="display: inline;">Purchase Collectible</p>
					<span class="modal-close">&times</span>
				</div>
				<div class="modal-body">
					<form class="form" action="?" method="post" id="?">
						<div class="collectible" title="${collectible.description}" >
							<img src="${collectible.icon}" class="collectible-img">
							<p class="collectible-description">${collectible.hist}</p>
						</div>
						<div class="price-div">
							<span class="price-content">
								cost: ${collectible.price}âš¡
							</span>
						</div>
						<div style="text-align: center;">
							<button type="submit">Purchase</button>
							<button type="submit">Dismiss</button>
						</div>
					</form>
				</div>
				`;
			}
		}
	</script>
	<script>
		let flag = true;
		setInterval(() => {
			//alert("loaded");
			if(flag){
				//col_click();
				flag = !flag
			}
		}, 3000);
	</script>

</body>
</html>
