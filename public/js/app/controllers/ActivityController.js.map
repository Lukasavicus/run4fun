{"version":3,"sources":["../../app-es6/controllers/ActivityController.js"],"names":["activityControllerInstance","activityController","Bind","DateHelper","MultiBind","Activity","ListActivities","Message","ActivityService","ActivitiesView","ActivitiesDashboardView","MessageView","ActivityController","$","document","querySelector","bind","_date","_activity","_place","_route_distance","_time","_listActivities","_message","_service","add","textToDate","text","event","preventDefault","activity","_createActivity","addActivity","then","console","log","res","catch","error","_cleanForm","getUserActivities","activities","forEach","value","parseFloat","Date"],"mappings":"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","file":"ActivityController.js","sourcesContent":["import {Bind} from '../helpers/Bind';\r\nimport { DateHelper } from '../helpers/DateHelper';\r\nimport {MultiBind} from '../helpers/MultiBind';\r\n\r\nimport {Activity} from '../models/Activity';\r\nimport {ListActivities} from '../models/ListActivities';\r\nimport {Message} from '../models/Message';\r\n\r\nimport {ActivityService} from '../services/ActivityService';\r\n\r\nimport {ActivitiesView} from '../views/ActivitiesView';\r\nimport {ActivitiesDashboardView} from '../views/ActivitiesDashboardView';\r\nimport {MessageView} from '../views/MessageView';\r\n\r\nclass ActivityController {\r\n\r\n    constructor(){\r\n        let $ = document.querySelector.bind(document);\r\n    \r\n        this._date = $(\"#date\");\r\n        this._activity = $(\"#activity\");\r\n        this._place = $(\"#place\");\r\n        this._route_distance = $(\"#route_distance\");\r\n        this._time = $(\"#time\");\r\n\r\n        //this._listActivities = new Bind(new ListActivities(), new ActivitiesView($(\"#activities-data\")), 'add');\r\n        this._listActivities = new MultiBind(new ListActivities(), [\r\n            new ActivitiesView($(\"#activities-data\")), \r\n            new ActivitiesDashboardView($(\"#management-dashboard\"))\r\n        ], 'add');\r\n        this._message = new Bind(new Message(), new MessageView($(\"#messaging\")), 'text');\r\n\r\n        this._service = new ActivityService();\r\n    }\r\n\r\n    test(){\r\n        this._listActivities.add(new Activity(DateHelper.textToDate(\"2020-01-01\"), \"Running\", \"condominium gym\", 4, \"00:36:51\"));\r\n        this._listActivities.add(new Activity(DateHelper.textToDate(\"2020-01-03\"), \"Running\", \"condominium gym\", 4, \"00:36:45\"));\r\n        this._listActivities.add(new Activity(DateHelper.textToDate(\"2020-01-12\"), \"Running\", \"condominium gym\", 5, \"00:46:59\"));\r\n\r\n        this._message.text = 'New Activities created';\r\n    }\r\n\r\n    add(event){\r\n        event.preventDefault();\r\n\r\n        const activity = this._createActivity();\r\n\r\n        this._service\r\n            .addActivity(activity)\r\n            .then(res => {\r\n                console.log(res);\r\n                this._message.text = \"Activity created\";\r\n            })\r\n            .catch(error => this._message.text = error);\r\n\r\n        this._listActivities.add(activity);\r\n\r\n        //this._message.text = 'New Activity created';\r\n\r\n        this._cleanForm();\r\n    }\r\n\r\n    import() {\r\n        this._service\r\n            .getUserActivities()\r\n            .then(activities => {\r\n                activities.forEach(activity => this._listActivities.add(activity));\r\n                this._message.text = \"Activities imported\";\r\n            })\r\n            .catch(error => this._message.text = error);\r\n    }\r\n\r\n    _createActivity(){\r\n        return new Activity(\r\n            DateHelper.textToDate(this._date.value),\r\n            this._activity.value,\r\n            this._place.value,\r\n            parseFloat(this._route_distance.value),\r\n            this._time.value\r\n        );\r\n    }\r\n\r\n    _cleanForm(){\r\n        this._date = new Date();\r\n        this._activity = \"Walking\";\r\n        this._place = \"\";\r\n        this._route_distance = 0.00;\r\n        this._time = \"00:00:00\";\r\n        //this._date.focus();\r\n    }\r\n}\r\n\r\nlet activityController = new ActivityController();\r\n\r\nexport function activityControllerInstance(){\r\n    return activityController;\r\n}"]}