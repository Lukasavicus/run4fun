{"version":3,"sources":["../../app-es6/services/UserService.js"],"names":["HttpService","Activity","Badge","UserService","_httpService","Promise","resolve","reject","get","then","badges_obj","map","badge_obj","title","icon","description","catch","console","log","error","activities_obj","Date","activity_obj","date","physical_activity","place","route_distance","time","activity","post","method","body","JSON","stringify","headers","user_obj","response"],"mappings":";;;;;;;;;;;;;;;AAAQA,uB,gBAAAA,W;;AAEAC,oB,mBAAAA,Q;;AACAC,iB,gBAAAA,K;;;;;;;;;;;;;;;;;;;;;mCAEKC,W;AACT,uCAAa;AAAA;;AACT,yBAAKC,YAAL,GAAoB,IAAIJ,WAAJ,EAApB;AACH;;AAED;;;;;oDACe;AAAA;;AACX,+BAAO,IAAIK,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,kCAAKH,YAAL,CACCI,GADD,CACK,kBADL,EAECC,IAFD,CAEM;AAAA,uCACFH,QAAQI,WAAWC,GAAX,CAAe;AAAA,2CACnB,IAAIT,KAAJ,CACIU,UAAUC,KADd,EAEID,UAAUE,IAFd,EAGIF,UAAUG,WAHd,CADmB;AAAA,iCAAf,CAAR,CADE;AAAA,6BAFN,EAWCC,KAXD,CAWO,iBAAS;AACZC,wCAAQC,GAAR,CAAYC,KAAZ;AACAZ;AACH,6BAdD;AAeH,yBAhBM,CAAP;AAiBH;;;wDAGkB;AAAA;;AACf,+BAAO,IAAIF,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,mCAAKH,YAAL,CACCI,GADD,CACK,gBADL,EAECC,IAFD,CAEM;AAAA,uCACFH,QAAQc,eAAeT,GAAf,CAAmB;AAAA,2CACvB,IAAIV,QAAJ,CACI,IAAIoB,IAAJ,CAASC,aAAaC,IAAtB,CADJ,EAEID,aAAaE,iBAFjB,EAGIF,aAAaG,KAHjB,EAIIH,aAAaI,cAJjB,EAKIJ,aAAaK,IALjB,CADuB;AAAA,iCAAnB,CAAR,CADE;AAAA,6BAFN,EAaCX,KAbD,CAaO,iBAAS;AACZC,wCAAQC,GAAR,CAAYC,KAAZ;AACAZ;AACH,6BAhBD;AAiBH,yBAlBM,CAAP;;AAoBA;;;;;AAKH;;;gDAEWqB,Q,EAAS;AAAA;;AACjB,+BAAO,IAAIvB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,mCAAKH,YAAL,CACCyB,IADD,CACM,gBADN,EACwB;AACpBC,wCAAS,MADW;AAEpBC,sCAAMC,KAAKC,SAAL,CAAe;AACjB,4CAASL,SAASL,IADD;AAEjB,yDAAsBK,SAASJ,iBAFd;AAGjB,6CAAUI,SAASH,KAHF;AAIjB,sDAAmBG,SAASF,cAJX;AAKjB,4CAASE,SAASD;AALD,iCAAf,CAFc;AASpBO,yCAAS;AACT,oDAAgB;AAChB;AAFS;AATW,6BADxB,EAcG,IAdH,EAeCzB,IAfD,CAeM,oBAAY;AACd,oCAAI0B,WAAWC,SAAS,iBAAT,CAAf;AACAnB,wCAAQC,GAAR,CAAYiB,QAAZ;AACA,oCAAIb,eAAec,SAAS,UAAT,CAAnB;AACA9B,wCAAQ,IAAIL,QAAJ,CACA,IAAIoB,IAAJ,CAASC,aAAaC,IAAtB,CADA,EAEAD,aAAaE,iBAFb,EAGAF,aAAaG,KAHb,EAIAH,aAAaI,cAJb,EAKAJ,aAAaK,IALb,CAAR;AAQH,6BA3BD,EA4BCX,KA5BD,CA4BO,iBAAS;AACZC,wCAAQC,GAAR,CAAYC,KAAZ;AACAZ;AACH,6BA/BD;AAgCH,yBAjCM,CAAP;AAkCH","file":"UserService.js","sourcesContent":["import {HttpService} from './HttpService';\r\n\r\nimport {Activity} from '../models/Activity';\r\nimport {Badge} from '../models/Badge';\r\n\r\nexport class UserService {\r\n    constructor(){\r\n        this._httpService = new HttpService();\r\n    }\r\n\r\n    //Badges\r\n    getUserBadges(){\r\n        return new Promise((resolve, reject) => {\r\n            this._httpService\r\n            .get('/v1/users/badges')\r\n            .then(badges_obj =>\r\n                resolve(badges_obj.map(badge_obj =>\r\n                    new Badge(\r\n                        badge_obj.title,\r\n                        badge_obj.icon,\r\n                        badge_obj.description\r\n                    )\r\n                ))\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n                reject(`Could not get badges for user`);\r\n            });\r\n        });\r\n    }\r\n\r\n    // Activities\r\n    getUserActivities(){\r\n        return new Promise((resolve, reject) => {\r\n            this._httpService\r\n            .get('/v1/activities')\r\n            .then(activities_obj =>\r\n                resolve(activities_obj.map(activity_obj =>\r\n                    new Activity(\r\n                        new Date(activity_obj.date),\r\n                        activity_obj.physical_activity,\r\n                        activity_obj.place,\r\n                        activity_obj.route_distance,\r\n                        activity_obj.time\r\n                    )\r\n                ))\r\n            )\r\n            .catch(error => {\r\n                console.log(error);\r\n                reject(`Could not get activities for user`);\r\n            });\r\n        });\r\n        \r\n        /*\r\n        return this._httpService\r\n            .get('/v1/activities')\r\n            .then(activities => console.log());\r\n        */\r\n    }\r\n\r\n    addActivity(activity){\r\n        return new Promise((resolve, reject) => {\r\n            this._httpService\r\n            .post('/v1/activities', {\r\n                method : 'POST',\r\n                body: JSON.stringify({\r\n                    'date' : activity.date,\r\n                    'physical_activity' : activity.physical_activity,\r\n                    'place' : activity.place,\r\n                    'route_distance' : activity.route_distance,\r\n                    'time' : activity.time,\r\n                }),\r\n                headers: {\r\n                'Content-Type': 'application/json'\r\n                // 'Content-Type': 'application/x-www-form-urlencoded',\r\n                },\r\n            }, true)\r\n            .then(response => {\r\n                let user_obj = response['user_activities'];\r\n                console.log(user_obj);\r\n                let activity_obj = response['activity'];\r\n                resolve(new Activity(\r\n                        new Date(activity_obj.date),\r\n                        activity_obj.physical_activity,\r\n                        activity_obj.place,\r\n                        activity_obj.route_distance,\r\n                        activity_obj.time\r\n                    )\r\n                )\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                reject(`Could not create activities for user`);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n"]}